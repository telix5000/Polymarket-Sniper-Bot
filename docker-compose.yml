version: "3.9"

services:
  polymarket-bot:
    build: .
    restart: unless-stopped
    privileged: true
    cap_add:
      - NET_ADMIN
    devices:
      - /dev/net/tun:/dev/net/tun
    environment:
      # Required
      - PRIVATE_KEY=${PRIVATE_KEY}
      - RPC_URL=${RPC_URL}

      # Trading
      - LIVE_TRADING=${LIVE_TRADING:-false}

      # Dashboard (optional) - Enable live terminal dashboard
      - DASHBOARD_ENABLED=${DASHBOARD_ENABLED:-false}

      # VPN (optional) - Set WIREGUARD_ENABLED=true or OPENVPN_ENABLED=true
      - WIREGUARD_ENABLED=${WIREGUARD_ENABLED:-false}
      - WG_CONFIG=${WG_CONFIG}
      - OPENVPN_ENABLED=${OPENVPN_ENABLED:-false}
      - OVPN_CONFIG=${OVPN_CONFIG}
      - VPN_BYPASS_POLYMARKET_READS=${VPN_BYPASS_POLYMARKET_READS:-false}

      # Telegram (optional but recommended)
      - TELEGRAM_BOT_TOKEN=${TELEGRAM_BOT_TOKEN}
      - TELEGRAM_CHAT_ID=${TELEGRAM_CHAT_ID}

      # Copy Trading (optional)
      - TARGET_ADDRESSES=${TARGET_ADDRESSES}
    # Enable TTY for dashboard mode (required for terminal UI)
    tty: true
    stdin_open: true
    tmpfs:
      - /data:size=32m,mode=0700
