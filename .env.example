# ============================================================================
# Polymarket Sniper Bot - Environment Configuration
# ============================================================================
#
# Following pmxt methodology: https://github.com/pmxt-dev/pmxt/blob/main/core/docs/SETUP_POLYMARKET.md
# The most you need is a private key - everything else has sensible defaults!
#

# ============================================================================
# MINIMAL REQUIRED CONFIGURATION (Just like pmxt!)
# ============================================================================
# Only these 3 variables are required to get started:

# 1. Your Polygon wallet private key (required)
#    - Used for signing transactions and deriving CLOB credentials
#    - Include the 0x prefix or not - both work
PRIVATE_KEY=your_private_key_here

# 2. Polygon RPC URL (required)
RPC_URL=https://polygon-rpc.com

# 3. Target addresses to monitor (required for copy trading)
#    - Comma-separated list of addresses
TARGET_ADDRESSES=0xabc...,0xdef...

# That's it! The bot automatically:
# - Derives CLOB API credentials from your private key
# - Uses EOA signature type (0) by default
# - Uses the official Polygon USDC.e address and decimals
# - Auto-detects your wallet type and auth method

# ============================================================================
# EVERYTHING BELOW IS OPTIONAL - Only change if you need to customize
# ============================================================================

# ----------------------------------------------------------------------------
# Network Configuration (Optional)
# ----------------------------------------------------------------------------
# Public key/address (optional, for validation - derived from PRIVATE_KEY if omitted)
# PUBLIC_KEY=0x0000000000000000000000000000000000000000

# ----------------------------------------------------------------------------
# CLOB Authentication (Optional - auto-derives from PRIVATE_KEY by default)
# ----------------------------------------------------------------------------
# Credential derivation is ENABLED BY DEFAULT (just like pmxt)
# Only set to false if you want to use explicit credentials
# CLOB_DERIVE_CREDS=true

# Manual CLOB Credentials (only if you have explicit credentials)
# These must be created programmatically - there is NO web UI to generate them
# POLYMARKET_API_KEY=your_clob_api_key_here
# POLYMARKET_API_SECRET=your_clob_api_secret_here
# POLYMARKET_API_PASSPHRASE=your_clob_passphrase_here

# Signature type (0=EOA is default, 1=PROXY, 2=GNOSIS_SAFE)
# POLYMARKET_SIGNATURE_TYPE=0

# Proxy/Safe address (only needed for signature type 1 or 2)
# POLYMARKET_PROXY_ADDRESS=0x...

# ----------------------------------------------------------------------------
# Collateral Token Configuration (Optional - defaults to official USDC.e)
# ----------------------------------------------------------------------------
# USDC.e on Polygon (these are the official defaults)
# COLLATERAL_TOKEN_ADDRESS=0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174
# COLLATERAL_TOKEN_DECIMALS=6

# ----------------------------------------------------------------------------
# Trading Configuration (Optional)
# ----------------------------------------------------------------------------
# Trade execution mode (clob or onchain)
# - clob (DEFAULT/RECOMMENDED): Uses Polymarket CLOB API
#         Requires API credentials (auto-derived from PRIVATE_KEY by default)
#         Full trading functionality with advanced order types
# - onchain (EXPERIMENTAL): Infrastructure for direct blockchain trading
#           Currently NOT FULLY IMPLEMENTED - returns NOT_IMPLEMENTED error
#           Requires additional integration work (see ONCHAIN_TRADING_IMPLEMENTATION.md)
#           Only use for development/testing of on-chain integration
# TRADE_MODE=clob

# Enable live trading (must be exactly this value to trade real money)
# ARB_LIVE_TRADING=I_UNDERSTAND_THE_RISKS

# Minimum trade sizes
# MIN_TRADE_SIZE_USD=100
# MIN_ORDER_USD=10

# Minimum price threshold for copy trade BUY orders (0.0-1.0 scale, default: 0.50 = 50¢)
# Prevents copying trades into low-probability "loser" positions.
# This is a SAFETY feature - copy trades at low prices are extremely risky.
# Does NOT affect SELL orders or other strategies (endgame-sweep has its own controls).
#
# Recommended values:
# - 0.15 (15¢): Aggressive, blocks only extreme losers
# - 0.25 (25¢): Moderate, blocks most risky positions
# - 0.50 (50¢): Conservative default, only copy trades close to fair odds
# MIN_BUY_PRICE=0.50

# Frontrun order sizing
# FRONTRUN_SIZE_MULTIPLIER: Percentage of target trade to frontrun (0.0-1.0, default: 0.5 = 50%)
# FRONTRUN_MAX_SIZE_USD: Maximum USD size for any frontrun order (caps the calculated size)
# Note: Frontrun size is also capped by MAX_POSITION_USD if set (uses the lower of both)
# FRONTRUN_SIZE_MULTIPLIER=0.5
# FRONTRUN_MAX_SIZE_USD=50

# ----------------------------------------------------------------------------
# Profit Thresholds (Optional)
# ----------------------------------------------------------------------------
# Minimum absolute profit in USD for quick-flip sells
# Ensures trades generate meaningful profits, not just 5-cent scalps
# Example: On a $5 position, 5% gain = $0.25 profit (meets default threshold)
# QUICK_FLIP_MIN_PROFIT_USD=0.25

# ----------------------------------------------------------------------------
# Auto-Redeem Configuration (Optional)
# ----------------------------------------------------------------------------
# Automatically claim resolved market positions to recover USDC
# When a market resolves, your winning/losing positions can be redeemed
# AUTO_REDEEM_ENABLED=true              # Enable automatic redemption (default: true)
# AUTO_REDEEM_MIN_POSITION_USD=0.10     # Skip dust positions below this value (default: $0.10)
# AUTO_REDEEM_CHECK_INTERVAL_MS=30000   # How often to check for redeemable positions (default: 30000ms = 30 seconds)
#                                       # Lower values = more responsive but more API calls
#                                       # Higher values = less responsive but fewer API calls

# Strategy Preset (enables all strategies including auto-redeem)
# Presets: off, conservative, balanced, aggressive
# STRATEGY_PRESET=balanced

# ----------------------------------------------------------------------------
# Approvals Configuration (Optional)
# ----------------------------------------------------------------------------
# Auto-approve USDC and ERC1155 tokens (true/false/dryrun)
# APPROVALS_AUTO=true

# Trust on-chain approvals instead of CLOB API allowance check (recommended)
# IMPORTANT: The Polymarket CLOB API has a known bug where getBalanceAllowance()
# returns allowance=0 even when on-chain approvals are correctly set to unlimited.
# See: https://github.com/Polymarket/clob-client/issues/128
#      https://github.com/Polymarket/py-clob-client/issues/102
#      https://github.com/Polymarket/py-clob-client/issues/109
# 
# When set to true (default), the bot will:
# - Trust on-chain approval verification from preflight checks
# - Bypass CLOB's broken allowance=0 response
# - Still verify balance is sufficient before trading
# - Log clearly when trust mode is active
#
# Only set to false if you want to use CLOB API for allowance checks (not recommended)
# TRUST_ONCHAIN_APPROVALS=true

# ----------------------------------------------------------------------------
# Gas Price Configuration (Optional - Polygon network)
# ----------------------------------------------------------------------------
# Gas price multiplier for transactions (default: 1.2 = 20% buffer)
# POLY_GAS_MULTIPLIER=1.2

# Minimum priority fee in gwei (default: 30 gwei)
# POLY_MAX_PRIORITY_FEE_GWEI=30

# Minimum max fee in gwei (default: 60 gwei)
# POLY_MAX_FEE_GWEI=60

# Maximum gas price cap in gwei (prevents transactions when gas is too high)
# RECOMMENDED: Set to 200 gwei for Polygon (normal is 30-50 gwei)
# Transactions will be BLOCKED if gas exceeds this cap to prevent waste
# Example: User paid $40 in fees at 195 gwei - this would have prevented it
# POLY_MAX_FEE_GWEI_CAP=200

# ----------------------------------------------------------------------------
# Relayer Configuration (Optional - for gasless transactions)
# ----------------------------------------------------------------------------
# Builder credentials are optional and separate from CLOB credentials
# POLY_BUILDER_API_KEY=your_builder_key
# POLY_BUILDER_API_SECRET=your_builder_secret
# POLY_BUILDER_API_PASSPHRASE=your_builder_passphrase

# ----------------------------------------------------------------------------
# Preflight Check Configuration (Optional)
# ----------------------------------------------------------------------------
# Bypass authentication preflight check (NOT RECOMMENDED - only for testing)
# If set to true, trading will be allowed even if preflight checks fail
# This is useful for testing when you have valid credentials but preflight is failing
# due to non-critical issues (network, rate limits, etc.)
# ALLOW_TRADING_WITHOUT_PREFLIGHT=false

# ----------------------------------------------------------------------------
# Logging & Monitoring (Optional)
# ----------------------------------------------------------------------------
# LOG_LEVEL=info

# ============================================================================
# For the full list of options, see the documentation:
# - README.md
# - docs/GUIDE.md
# - docs/CREDENTIALS_EXPLAINED.md
# ============================================================================
