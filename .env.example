# ═══════════════════════════════════════════════════════════
# Polymarket Bot - Configuration
# ═══════════════════════════════════════════════════════════

# === REQUIRED ===
PRIVATE_KEY=your_private_key_here

# === OPTIONAL ===
# RPC URL (Polygon). If not set, defaults to https://polygon-rpc.com
# Infura Polygon RPC is recommended (get your API key at infura.io)
# This goes direct (no VPN) - Infura is not geo-blocked
RPC_URL=https://polygon-mainnet.infura.io/v3/YOUR_API_KEY

# MAX_TRADE_USD=25
# LIVE_TRADING=I_UNDERSTAND_THE_RISKS

# Telegram notifications
# TELEGRAM_BOT_TOKEN=your_bot_token
# TELEGRAM_CHAT_ID=your_chat_id

# ═══════════════════════════════════════════════════════════════════════════
# WEB DASHBOARD - Glances-style real-time monitoring (accessible via port)
# ═══════════════════════════════════════════════════════════════════════════
#
# Enable a web dashboard that shows real-time updates of:
# - Wallet balances and positions
# - Recent trades and P&L
# - Whale activity feed
# - System metrics (latency, WebSocket status)
#
# Set DASHBOARD_PORT to enable the web dashboard and expose it on that port.
# Access via browser: http://localhost:DASHBOARD_PORT
#
# DASHBOARD_PORT=3000               # Port for web dashboard (default: 3000)
#
# Docker usage:
#   docker run -p 3000:3000 -e DASHBOARD_PORT=3000 polymarket-bot
#
# Or with docker-compose (port auto-exposed):
#   DASHBOARD_PORT=3000 docker-compose up
#
# API endpoints:
#   /api/data      - Full dashboard data (JSON)
#   /api/metrics   - Bot metrics only
#   /api/positions - Current positions
#   /api/trades    - Recent trades
#   /api/whales    - Whale activity
#

# ═══════════════════════════════════════════════════════════════════════════
# MARKET SCANNER - Scan for Active Trading Opportunities (ENABLED BY DEFAULT)
# ═══════════════════════════════════════════════════════════════════════════
#
# When no whale signals are present, the bot scans for the most active
# markets on Polymarket and looks for trading opportunities there.
# This keeps the churn going even during quiet periods!
#
# SCAN_ACTIVE_MARKETS=true              # Enable/disable scanner (default: true)
# SCAN_MIN_VOLUME_USD=10000             # Min 24h volume to consider (default: $10k)
# SCAN_TOP_N_MARKETS=20                 # Number of top markets to track (default: 20)
# SCAN_INTERVAL_SECONDS=300             # Refresh interval (default: 5 min)
#
# Disable scanner to only trade on whale signals:
# SCAN_ACTIVE_MARKETS=false

# ═══════════════════════════════════════════════════════════════════════════
# DYNAMIC RESERVES - Self-Balancing Capital Management (ENABLED BY DEFAULT)
# ═══════════════════════════════════════════════════════════════════════════
#
# Automatically adjusts reserves based on:
# - Missed opportunities (too much reserve? → lower it to trade more)
# - Missed hedges (not enough reserve? → raise it for protection)
#
# This keeps the capital churning optimally!
#
# DYNAMIC_RESERVES_ENABLED=true         # Enable/disable (default: true)
# RESERVE_ADAPTATION_RATE=0.1           # How fast to adapt (default: 10%)
# MISSED_OPPORTUNITY_WEIGHT=0.5         # Weight for missed trades (default: 50%)
# HEDGE_COVERAGE_WEIGHT=0.5             # Weight for hedge needs (default: 50%)
# MAX_RESERVE_FRACTION=0.5              # Maximum reserve (default: 50%)
#
# Disable dynamic reserves for fixed 25% reserve:
# DYNAMIC_RESERVES_ENABLED=false

# ═══════════════════════════════════════════════════════════════════════════
# ORDER TYPES - IMPORTANT: Understand the Difference!
# ═══════════════════════════════════════════════════════════════════════════
#
# FOK (Fill-Or-Kill) - DEFAULT:
#   ✓ Order fills IMMEDIATELY and COMPLETELY, or is cancelled
#   ✓ Does NOT "sit there until filled" - it's instant or nothing!
#   ✓ Best for: Fast-moving markets, copying whale trades quickly
#   ✗ May miss opportunities if price moves before execution
#
# GTC (Good-Til-Cancelled) - LIMIT ORDER:
#   ✓ Posts to orderbook and WAITS until your price is hit
#   ✓ Like a stock market limit order - sits until filled or cancelled
#   ✓ Best for: Getting a specific price, patient entry/exit
#   ✗ May never fill if price moves away from your limit
#
# CONFIGURATION PRIORITY (highest to lowest):
#   1. BUY_ORDER_TYPE / SELL_ORDER_TYPE (side-specific)
#   2. ORDER_TYPE (master setting for both sides)
#   3. Default: FOK
#
# Set a MASTER order type for BOTH buys and sells:
# ORDER_TYPE=GTC
#
# Or fine-tune per side:
# BUY_ORDER_TYPE=GTC
# SELL_ORDER_TYPE=FOK
#
# For GTC buy orders, expiration in seconds (default: 3600 = 1 hour):
# BUY_GTC_EXPIRATION_SECONDS=3600
#
# Slippage settings for BUY orders (only used with FOK):
# BUY_DEFAULT_SLIPPAGE_PCT=2
# BUY_MAX_SLIPPAGE_PCT=5
#
# For GTC sell orders, expiration in seconds (default: 86400 = 24 hours):
# SELL_GTC_EXPIRATION_SECONDS=86400
#
# ═══════════════════════════════════════════════════════════════════════════

# ═══════════════════════════════════════════════════════════════════════════
# ON-CHAIN MONITORING - Blockchain-Speed Detection via Infura WebSocket
# ═══════════════════════════════════════════════════════════════════════════
#
# WHY THIS MATTERS:
#   On-chain events are FASTER than Polymarket API!
#   - Blockchain: ~2 sec block time, instant event notification
#   - Polymarket API: Polling-based, 200ms+ delay, can miss rapid moves
#
# WHAT WE MONITOR VIA INFURA (FAST):
#   ✓ Whale trades (OrderFilled events) - see them BEFORE the API!
#   ✓ Our position changes (Transfer events) - instant fill confirmation
#   ✓ Real-time prices on tokens we hold - no polling needed
#
# WHAT STILL NEEDS POLYMARKET API (SLOWER):
#   - Orderbook depth (CLOB is off-chain)
#   - Market metadata
#   - Leaderboard data
#
# DATA PRIORITY: On-chain signals > API signals (on-chain is faster!)
# ═══════════════════════════════════════════════════════════════════════════

# Enable/disable on-chain monitoring (default: true if Infura URL detected)
ONCHAIN_MONITOR_ENABLED=true

# ═══════════════════════════════════════════════════════════════════════════
# MEMPOOL MONITORING - See PENDING trades BEFORE they confirm!
# ═══════════════════════════════════════════════════════════════════════════
#
# This is the FASTEST way to copy whale trades - you see them BEFORE the
# transaction confirms, allowing you to get in at the same price!
#
# HOW IT WORKS:
# 1. Whale submits a trade → it goes to the mempool (pending)
# 2. We see it in mempool → immediately copy with higher gas
# 3. Our copy trade confirms alongside (or before!) the whale's trade
#
# REQUIREMENTS:
# - RPC provider must support pending transaction subscription
# - Infura, Alchemy, QuickNode all support this
#
# MEMPOOL_MONITOR_ENABLED=true
# MEMPOOL_GAS_MULTIPLIER=1.2   # Use 20% higher gas than whale's transaction

# ═══════════════════════════════════════════════════════════════════════════
# WHALE TRADE DETECTION - The #1 Setting If You're Not Seeing Trades!
# ═══════════════════════════════════════════════════════════════════════════
#
# Minimum trade size to consider a "whale trade" (default: $100)
# Lower = more signals but more noise. Higher = fewer but stronger signals.
#
# You can use either name (they're identical):
#   WHALE_TRADE_USD=100           (simpler, preferred)
#   ONCHAIN_MIN_WHALE_TRADE_USD=100  (legacy name, still works)
#
# DEFAULT: $100 - catches most whale activity. Increase to $500 for stronger signals only.
#
# WHALE_TRADE_USD=100

# ═══════════════════════════════════════════════════════════════════════════
# WHALE TRADING REQUIREMENTS - Why No Buys Are Happening
# ═══════════════════════════════════════════════════════════════════════════
#
# With COPY_ANY_WHALE_BUY=true (default), you only need:
#   - ONE whale trade ≥ WHALE_TRADE_USD ($100) → immediately copied!
#
# With COPY_ANY_WHALE_BUY=false, additional bias requirements apply:
#   - biasMinNetUsd: $300 - Net whale flow must exceed $300 in same direction
#   - biasMinTrades: 3 - At least 3 whale trades required to establish bias
#   - biasWindowSeconds: 3600 - Trades within 1 hour window are summed
#   - biasStaleSeconds: 900 - Bias expires after 15 min of no activity
#
# IF NO BUYS ARE HAPPENING after running for an hour:
#   - Check that your RPC_URL is working (Infura WebSocket required)
#   - Ensure LIVE_TRADING=I_UNDERSTAND_THE_RISKS is set
#   - Try lowering WHALE_TRADE_USD to $50
#
# ═══════════════════════════════════════════════════════════════════════════

# ═══════════════════════════════════════════════════════════════════════════
# INSTANT COPY MODE - Copy ANY whale buy immediately (DEFAULT: ENABLED)
# ═══════════════════════════════════════════════════════════════════════════
#
# DEFAULT: true - See ONE whale buy → immediately copy it
#
# When enabled (default):
#   - See ONE whale buy ≥ WHALE_TRADE_USD → immediately copy it
#   - No waiting for flow confirmation
#   - Best for active copy trading
#
# When disabled (COPY_ANY_WHALE_BUY=false):
#   - Requires $300+ net flow from whales in same direction
#   - At least 3 whale trades needed
#   - More conservative but may miss opportunities
#
# COPY_ANY_WHALE_BUY=true  # Already the default, no need to set

# ═══════════════════════════════════════════════════════════════════════════
# INFURA TIER CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════
#
# Set this to match your Infura plan for reference.
# 
# The bot uses WebSocket subscriptions which are very credit-efficient:
# - Subscriptions cost 10 credits ONE TIME
# - Events received via WebSocket are FREE
# - No polling = minimal credit usage
# 
# ┌─────────────┬──────────────────┬─────────────────┐
# │ TIER        │ CREDITS/SEC      │ CREDITS/DAY     │
# ├─────────────┼──────────────────┼─────────────────┤
# │ core (FREE) │ 500              │ 3,000,000       │
# │ developer   │ 4,000            │ 15,000,000      │
# │ team        │ 40,000           │ 75,000,000      │
# │ growth      │ 100,000+         │ 200,000,000+    │
# └─────────────┴──────────────────┴─────────────────┘
#
# WHY WEBSOCKET IS EFFICIENT:
#   - Subscribe to events: 10 credits (one-time)
#   - Receive events: FREE (no per-event cost)
#   - Compared to polling getLogs: 75 credits per call
#
# The bot monitors:
#   - CTF Exchange OrderFilled events (whale trades)
#   - NEG_RISK Exchange OrderFilled events (negative risk markets)
#   - CTF Token Transfer events (your position changes)

INFURA_TIER=core

# ═══════════════════════════════════════════════════════════════════════════
# ADVANCED INFURA SETTINGS (usually auto-configured)
# ═══════════════════════════════════════════════════════════════════════════

# Custom WebSocket URL (optional - auto-detected from RPC_URL for Infura)
# Use this if you have a different WebSocket provider or custom endpoint
# WS_RPC_URL=wss://polygon-mainnet.infura.io/ws/v3/YOUR_API_KEY

# Reconnect delay after WebSocket disconnect (milliseconds)
# Lower = faster reconnect, but more aggressive. Default: 1000ms
# ONCHAIN_RECONNECT_DELAY_MS=1000

# Max reconnect attempts before giving up (default: 10)
# After this, falls back to API-only mode
# ONCHAIN_MAX_RECONNECT_ATTEMPTS=10

# ═══════════════════════════════════════════════════════════
# VPN Configuration (geo-blocked regions only)
# ═══════════════════════════════════════════════════════════
# VPN is ONLY needed for Polymarket API (order submissions).
# Infura RPC traffic bypasses VPN automatically for speed.

# WireGuard
# WG_CONFIG=/path/to/wg0.conf

# OpenVPN
# OVPN_CONFIG=/path/to/client.ovpn

# ═══════════════════════════════════════════════════════════
# LIQUIDATION MODE - Force Sell Positions on Startup
# ═══════════════════════════════════════════════════════════
#
# LIQUIDATION_MODE controls what happens to existing positions:
#   "off"     - Normal trading (default)
#   "losing"  - Only sell positions with negative P&L (in the red)
#   "all"     - Sell ALL positions regardless of P&L
#
# After liquidation completes, the bot AUTOMATICALLY resumes
# normal trading - no restart needed!
#
# Examples:
#   LIQUIDATION_MODE=losing   # Cut your losses, keep winners
#   LIQUIDATION_MODE=all      # Exit everything
#
# Legacy support: FORCE_LIQUIDATION=true maps to LIQUIDATION_MODE=all

# LIQUIDATION_MODE=losing
# LIQUIDATION_MAX_SLIPPAGE_PCT=10
# LIQUIDATION_POLL_INTERVAL_MS=1000

# ═══════════════════════════════════════════════════════════
# POL Gas Reserve Settings
# ═══════════════════════════════════════════════════════════

# POL_RESERVE_TARGET=50
# POL_RESERVE_MIN=0.5
# POL_RESERVE_MAX_SWAP_USD=10

# ═══════════════════════════════════════════════════════════
# GitHub Error Reporter - Auto-report errors to GitHub Issues
# ═══════════════════════════════════════════════════════════
#
# When enabled, significant errors are automatically reported
# to GitHub Issues for easier debugging and troubleshooting.
#
# ⚠️ IMPORTANT: BOTH variables below are REQUIRED for this to work!
#    - GITHUB_ERROR_REPORTER_TOKEN = Your GitHub Personal Access Token
#    - GITHUB_ERROR_REPORTER_REPO  = The repo to create issues in
#
# SETUP:
# 1. Create a GitHub Personal Access Token with 'repo' scope
#    https://github.com/settings/tokens/new
# 2. Set BOTH variables below (missing either one = reporter disabled!)
#
# FEATURES:
# - Deduplicates similar errors (1 issue per unique error per hour)
# - Rate limited (max 10 issues/hour by default)
# - Sensitive data (keys, tokens) automatically redacted
# - Reports: trade copy failures, API issues, whale detection problems
#
# GITHUB_ERROR_REPORTER_TOKEN=ghp_your_personal_access_token
# GITHUB_ERROR_REPORTER_REPO=your-username/your-repo-name
# GITHUB_ERROR_REPORTER_ENABLED=true
